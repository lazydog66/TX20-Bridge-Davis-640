# tx20bridge6410
This project is about making an interface for a Davis 6410 anemeometer so that it looks like a Technoline TX20. Some time ago I built and coded an Arduino based wind station that logs and reports wind speed and direction to a Raspberry PI server using a SIM800L modem. Recently, the TX20 started to fail due to, I suspect, moisture getting into the unit. I needed a replacement, but sadly, the TX20 is no longer avaiable and I had to think about an alternative. After looking at various mother makes, the Davis 6410 caught my eye. It looks similar to the TX20 but works on a simpler design (a reed switch for the anemometer and a potentiometer for the wind vane). The TX20 on the other hand is a bit more complicated ait houses a processor inside which reads and encodes the wind speed and direction. The data is then sent down the line as a serial data frame. If I was going to replace the TX20 with the Davis 6410 then I would need to change the hardware and software on my wind station, something which I wasn't to keen on for various reasons which I don't want to bore you with. Then I had a thought, why not leave the wind station hardware and software as it is, and instead convert the Davis 6410 into a TX20. This is what I ended up doing.

## The Bridging Box
To convert the Davis 6410 into a TX20, I built a 'bridging'box. The box comprises of an input socket which the Davis6410 plugs into, and an output socket which the wind station sees as a TX20 unit. The box does two things, it converts the physical connections for the TX20 cable in to those for the Davis 6410. It also reads the data from the Davis6410 and converts it to the format emitted by the TX20. The bridge turned out to be very easy to implement with just an Arduino Pro Min 328. This is how it works.

The connection to the TX20 uses 4 wires, Vcc, GND, Dtr and TXd, and these lines go straight into the brdiging box. The two power lines are used to power the Arduino directly (the Arduino Pro Mini uses just a few milli amps). Dtr and TXd lines also go directly to the Arduino (Dtr is an input to the Arduino and Txd is an output from the Arduino). The purpose of these two lines is as follows. Dtr is used to control the TX20. When it is pulled low the TX20 reads the wind speed and direction and then transmits the values on TXd. Releasing Dtr instructs the TX20 from sending data frames on TXd. I couldn't find official information on the TX20 protocol but found this excellent website which does a great job of investigating and explaining the TX20 data format. I based my software around this. On the Davis 6410 side,
